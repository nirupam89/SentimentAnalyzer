# ----------------------------------------
# PRODUCTION PROFILE
# ----------------------------------------
# This profile is used for production deployment on Render
# Run with: SPRING_PROFILES_ACTIVE=prod
# Or set in Render environment variables: SPRING_PROFILES_ACTIVE=prod

spring.application.name=ollama-sentiment-api

# ----------------------------------------
# SERVER CONFIGURATION
# ----------------------------------------
# Uses PORT environment variable provided by Render
server.port=${PORT:8080}

# Never show stack traces in production (security best practice)
server.error.include-stacktrace=NEVER
server.error.include-message=never
server.error.include-binding-errors=never

# ----------------------------------------
# SPRING AI (OLLAMA)
# ----------------------------------------
# Use environment variable for Ollama URL in production
# Set OLLAMA_BASE_URL in Render environment variables
spring.ai.ollama.base-url=${OLLAMA_BASE_URL:http://localhost:11434}

# ---- Chat Model Settings ----
spring.ai.ollama.chat.model=${OLLAMA_MODEL:llama3}
spring.ai.ollama.chat.options.temperature=0.5

# ---- Embedding Model Settings (Optional) ----
# spring.ai.ollama.embedding.model=${OLLAMA_EMBEDDING_MODEL:nomic-embed-text}

# ----------------------------------------
# DATABASE (PostgreSQL)
# ----------------------------------------
# Uses environment variables provided by Render
spring.datasource.url=${DB_URL:jdbc:postgresql://dpg-d4epv4pr0fns73bso4n0-a:5432/sentiment_db_u44e}
spring.datasource.username=${DB_USER:admin}
spring.datasource.password=${DB_PASS:goTFHT3Vt7mfN6FMUZ8MhOdFOm73ZUKw}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection pool settings for production
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000

# ----------------------------------------
# JPA / HIBERNATE
# ----------------------------------------
# 'validate': validates the schema without making changes (safe for prod)
spring.jpa.hibernate.ddl-auto=validate

# Do not show SQL queries in production (performance and security)
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Production JPA settings
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ----------------------------------------
# LOGGING
# ----------------------------------------
# Production logging - less verbose
logging.level.root=INFO
logging.level.io.github.nirupam.sentiment_analysis_service=INFO
logging.level.org.springframework.ai=INFO
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN

# Logging patterns for production
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

